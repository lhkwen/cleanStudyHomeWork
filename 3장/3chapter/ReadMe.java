<요약>
checkout 메서드가 한 클래스 안에서 너무 많은 일을 하고 있어서 역할별로 클래스를 분리하였음

파싱, 검증, 가격 계산, 할인, 저장, 재고 확인을 각각 전담 객체로 나눔

boolean vip, List errors 같은 플래그 인자를 없애고 DTO와 예외로 흐름을 단순화함

매직넘버·조건문을 정책(Pricing/Shipping/Discount) 클래스로 추상화해 명시적으로 표현함

서비스는 흐름만 제어하도록 하고, 부작용이나 내부 상태(lastOrderId 등)는 모두 제거함
